[gd_scene load_steps=64 format=3 uid="uid://cpkd4nxkmm7ib"]

[ext_resource type="Script" path="res://Scenes/Characters/Enemies/Ninja/Ninja.gd" id="1_h31j7"]
[ext_resource type="Texture2D" uid="uid://dbp8abgyvb3ku" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle8.png" id="3_63hu7"]
[ext_resource type="Texture2D" uid="uid://b5k4vv3byo4ur" path="res://Assets/Characters/Enemies/PlaceholderNinja/AttackOne/Attack2.png" id="3_d8vqt"]
[ext_resource type="Script" path="res://Scenes/Characters/Enemies/EnemyStateMachine.gd" id="3_qgdfu"]
[ext_resource type="Texture2D" uid="uid://t25dj0iaya8r" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death14.png" id="3_rx5km"]
[ext_resource type="Script" path="res://Scenes/Characters/Enemies/Ninja/States/Idle.gd" id="4_hggm4"]
[ext_resource type="Texture2D" uid="uid://ih5e2rdw53ek" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle1.png" id="4_ktx47"]
[ext_resource type="Texture2D" uid="uid://sr3un08onpcd" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle2.png" id="5_h5rku"]
[ext_resource type="Texture2D" uid="uid://kv6lfl1q6kox" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle3.png" id="6_2rquf"]
[ext_resource type="Script" path="res://Scenes/Characters/Enemies/Ninja/States/Return.gd" id="6_boh6s"]
[ext_resource type="Texture2D" uid="uid://dkeuvq3jnxyy7" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle4.png" id="7_0fkn8"]
[ext_resource type="Texture2D" uid="uid://bppqdvjs3oaqr" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle5.png" id="8_mr6ij"]
[ext_resource type="Texture2D" uid="uid://tmqyjpv4digj" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle6.png" id="9_88tuq"]
[ext_resource type="Texture2D" uid="uid://blo3flll7pcfa" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle7.png" id="10_u1q06"]
[ext_resource type="Texture2D" uid="uid://ce2c1m0w071ii" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle9.png" id="11_hhhed"]
[ext_resource type="Texture2D" uid="uid://d3v47n6u2mft5" path="res://Assets/Characters/Enemies/PlaceholderNinja/Idle/Idle10.png" id="12_k0424"]
[ext_resource type="Texture2D" uid="uid://b75gua7cm8267" path="res://Assets/Characters/Enemies/PlaceholderNinja/Run/Run1.png" id="13_m5c84"]
[ext_resource type="Texture2D" uid="uid://tlldpxgxm3ly" path="res://Assets/Characters/Enemies/PlaceholderNinja/Run/Run2.png" id="14_ypmw6"]
[ext_resource type="Texture2D" uid="uid://bqwmvk3lfisps" path="res://Assets/Characters/Enemies/PlaceholderNinja/Run/Run3.png" id="15_fo7yx"]
[ext_resource type="Texture2D" uid="uid://vqho54o0q8hy" path="res://Assets/Characters/Enemies/PlaceholderNinja/Run/Run4.png" id="16_78oda"]
[ext_resource type="Texture2D" uid="uid://cdusdeh3m8apu" path="res://Assets/Characters/Enemies/PlaceholderNinja/Run/Run5.png" id="17_6mv1t"]
[ext_resource type="Texture2D" uid="uid://bryld4ujn2tqk" path="res://Assets/Characters/Enemies/PlaceholderNinja/Run/Run6.png" id="18_31iw6"]
[ext_resource type="Texture2D" uid="uid://c61s14y7jdj08" path="res://Assets/Characters/Enemies/PlaceholderNinja/Run/Run7.png" id="19_8wvvn"]
[ext_resource type="Texture2D" uid="uid://xm475bkxgu18" path="res://Assets/Characters/Enemies/PlaceholderNinja/Run/Run8.png" id="20_u0tws"]
[ext_resource type="Texture2D" uid="uid://k4camg2dsvnh" path="res://Assets/Characters/Enemies/PlaceholderNinja/Walk/Walk1.png" id="21_hc618"]
[ext_resource type="Texture2D" uid="uid://dvxmqb37nh0uk" path="res://Assets/Characters/Enemies/PlaceholderNinja/Walk/Walk2.png" id="22_66yd2"]
[ext_resource type="Texture2D" uid="uid://crufrkra3uaki" path="res://Assets/Characters/Enemies/PlaceholderNinja/Walk/Walk3.png" id="23_6182m"]
[ext_resource type="Texture2D" uid="uid://dyedopxxw58ds" path="res://Assets/Characters/Enemies/PlaceholderNinja/Walk/Walk4.png" id="24_x57dl"]
[ext_resource type="Texture2D" uid="uid://dpke5e8c4y63u" path="res://Assets/Characters/Enemies/PlaceholderNinja/Walk/Walk5.png" id="25_0etxt"]
[ext_resource type="Texture2D" uid="uid://2lod8eqnminm" path="res://Assets/Characters/Enemies/PlaceholderNinja/Walk/Walk6.png" id="26_hrvhr"]
[ext_resource type="Texture2D" uid="uid://c2rus6pmvyam3" path="res://Assets/Characters/Enemies/PlaceholderNinja/Walk/Walk7.png" id="27_ljt3d"]
[ext_resource type="Texture2D" uid="uid://ch4iglt5xr232" path="res://Assets/Characters/Enemies/PlaceholderNinja/Walk/Walk8.png" id="28_guoyo"]
[ext_resource type="Texture2D" uid="uid://b52q8ybbhwcfl" path="res://Assets/Characters/Enemies/PlaceholderNinja/AttackOne/Attack1.png" id="30_17erg"]
[ext_resource type="Texture2D" uid="uid://bdwap4ca8uadm" path="res://Assets/Characters/Enemies/PlaceholderNinja/AttackOne/Attack3.png" id="31_g301g"]
[ext_resource type="Texture2D" uid="uid://cpw3yprudhmjk" path="res://Assets/Characters/Enemies/PlaceholderNinja/AttackOne/Attack4.png" id="32_55r8o"]
[ext_resource type="Script" path="res://Scenes/Characters/Enemies/Ninja/States/Patrol.gd" id="32_m7exb"]
[ext_resource type="Texture2D" uid="uid://i7wkm6xaeh21" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death1.png" id="34_46tc8"]
[ext_resource type="Texture2D" uid="uid://fkxw0rvywbs1" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death2.png" id="35_4pm6p"]
[ext_resource type="Texture2D" uid="uid://bscaf6otdkwyi" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death3.png" id="36_ly0u6"]
[ext_resource type="Texture2D" uid="uid://b5wcyniefgbal" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death4.png" id="37_ftgc5"]
[ext_resource type="Texture2D" uid="uid://bii8lmbmhl70c" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death5.png" id="38_6b7oh"]
[ext_resource type="Script" path="res://Scenes/Characters/Enemies/Ninja/States/Attack.gd" id="38_u5ucx"]
[ext_resource type="Texture2D" uid="uid://cegif7l04d4pe" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death6.png" id="39_cpjeq"]
[ext_resource type="Script" path="res://Scenes/Characters/Enemies/Ninja/States/Death.gd" id="39_vwggl"]
[ext_resource type="Texture2D" uid="uid://bfnws0r4xku13" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death7.png" id="40_gvhbu"]
[ext_resource type="Texture2D" uid="uid://c3t03n1vxcrxs" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death8.png" id="41_e1dqw"]
[ext_resource type="Texture2D" uid="uid://sk4bgicbgcyy" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death9.png" id="42_usrr7"]
[ext_resource type="Texture2D" uid="uid://bdj4barblk67c" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death10.png" id="43_pnqtp"]
[ext_resource type="Texture2D" uid="uid://cs67ji3sy6p2g" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death11.png" id="44_dbcyn"]
[ext_resource type="Texture2D" uid="uid://cdrdy0vl6ghqf" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death12.png" id="45_jkoeq"]
[ext_resource type="Texture2D" uid="uid://dlexdplbspdau" path="res://Assets/Characters/Enemies/PlaceholderNinja/Death/Death13.png" id="46_xyr2x"]
[ext_resource type="Script" path="res://Scenes/Characters/Enemies/Ninja/States/Chase.gd" id="51_qwdm4"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_oip2f"]
height = 52.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ctsan"]
size = Vector2(50, 38)

[sub_resource type="CircleShape2D" id="CircleShape2D_huuj3"]
radius = 340.0

[sub_resource type="CircleShape2D" id="CircleShape2D_pb77f"]
radius = 200.0

[sub_resource type="CircleShape2D" id="CircleShape2D_kbyk5"]
radius = 35.0

[sub_resource type="Animation" id="Animation_8qrp2"]
resource_name = "Attack"
length = 0.4
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [ExtResource("30_17erg"), ExtResource("3_d8vqt"), ExtResource("31_g301g"), ExtResource("32_55r8o")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Hitbox/CollisionShape2D:disabled")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.3),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [true, false, true]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("FSM/Attack")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.1),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"attack"
}]
}

[sub_resource type="Animation" id="Animation_m4lb2"]
resource_name = "Death"
length = 1.4
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.30055),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("34_46tc8"), ExtResource("35_4pm6p"), ExtResource("36_ly0u6"), ExtResource("37_ftgc5"), ExtResource("38_6b7oh"), ExtResource("39_cpjeq"), ExtResource("40_gvhbu"), ExtResource("41_e1dqw"), ExtResource("42_usrr7"), ExtResource("43_pnqtp"), ExtResource("44_dbcyn"), ExtResource("45_jkoeq"), ExtResource("46_xyr2x"), ExtResource("3_rx5km")]
}

[sub_resource type="Animation" id="Animation_wwbyk"]
resource_name = "Idle"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("4_ktx47"), ExtResource("5_h5rku"), ExtResource("6_2rquf"), ExtResource("7_0fkn8"), ExtResource("8_mr6ij"), ExtResource("9_88tuq"), ExtResource("10_u1q06"), ExtResource("3_63hu7"), ExtResource("11_hhhed"), ExtResource("12_k0424")]
}

[sub_resource type="Animation" id="Animation_0foy8"]
resource_name = "Move"
length = 0.8
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("13_m5c84"), ExtResource("14_ypmw6"), ExtResource("15_fo7yx"), ExtResource("16_78oda"), ExtResource("17_6mv1t"), ExtResource("18_31iw6"), ExtResource("19_8wvvn"), ExtResource("20_u0tws")]
}

[sub_resource type="Animation" id="Animation_t2hcl"]
resource_name = "Patrol"
length = 0.8
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite2D:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [ExtResource("21_hc618"), ExtResource("22_66yd2"), ExtResource("23_6182m"), ExtResource("24_x57dl"), ExtResource("25_0etxt"), ExtResource("26_hrvhr"), ExtResource("27_ljt3d"), ExtResource("28_guoyo")]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_rgsam"]
_data = {
"Attack": SubResource("Animation_8qrp2"),
"Death": SubResource("Animation_m4lb2"),
"Idle": SubResource("Animation_wwbyk"),
"Move": SubResource("Animation_0foy8"),
"Patrol": SubResource("Animation_t2hcl")
}

[node name="Ninja" type="CharacterBody2D" node_paths=PackedStringArray("navigation_agent", "disengage_area", "chase_area", "attack_area", "sprite", "animation_player", "hurtbox", "hitbox")]
visibility_layer = 4
collision_layer = 4
collision_mask = 3
script = ExtResource("1_h31j7")
enemy_speed = 80.0
navigation_agent = NodePath("NavigationAgent2D")
disengage_area = NodePath("DisengageArea")
chase_area = NodePath("ChaseArea")
attack_area = NodePath("AttackArea")
sprite = NodePath("Sprite2D")
animation_player = NodePath("AnimationPlayer")
hurtbox = NodePath("Hurtbox")
hitbox = NodePath("Hitbox")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("34_46tc8")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CapsuleShape2D_oip2f")

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="."]
path_postprocessing = 1

[node name="Hurtbox" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
shape = SubResource("CapsuleShape2D_oip2f")

[node name="Hitbox" type="Area2D" parent="."]
position = Vector2(33, -10)
collision_layer = 4
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hitbox"]
shape = SubResource("RectangleShape2D_ctsan")
disabled = true

[node name="DisengageArea" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="DisengageArea"]
shape = SubResource("CircleShape2D_huuj3")

[node name="ChaseArea" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="ChaseArea"]
shape = SubResource("CircleShape2D_pb77f")

[node name="AttackArea" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackArea"]
shape = SubResource("CircleShape2D_kbyk5")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_rgsam")
}

[node name="FSM" type="Node" parent="." node_paths=PackedStringArray("enemy", "initial_state")]
script = ExtResource("3_qgdfu")
enemy = NodePath("..")
initial_state = NodePath("Idle")

[node name="Idle" type="Node" parent="FSM" node_paths=PackedStringArray("enemy")]
script = ExtResource("4_hggm4")
enemy = NodePath("../..")

[node name="Return" type="Node" parent="FSM" node_paths=PackedStringArray("enemy")]
script = ExtResource("6_boh6s")
enemy = NodePath("../..")

[node name="Patrol" type="Node" parent="FSM" node_paths=PackedStringArray("patrol_timer", "enemy")]
script = ExtResource("32_m7exb")
patrol_timer = NodePath("PatrolTimer")
enemy = NodePath("../..")

[node name="PatrolTimer" type="Timer" parent="FSM/Patrol"]
one_shot = true

[node name="Chase" type="Node" parent="FSM" node_paths=PackedStringArray("target_update_timer", "enemy")]
script = ExtResource("51_qwdm4")
target_update_timer = NodePath("TargetUpdateTimer")
enemy = NodePath("../..")

[node name="TargetUpdateTimer" type="Timer" parent="FSM/Chase"]
wait_time = 0.25
autostart = true

[node name="Attack" type="Node" parent="FSM" node_paths=PackedStringArray("enemy")]
script = ExtResource("38_u5ucx")
enemy = NodePath("../..")

[node name="AttackCooldownTimer" type="Timer" parent="FSM/Attack"]
wait_time = 0.5
one_shot = true

[node name="Death" type="Node" parent="FSM" node_paths=PackedStringArray("enemy")]
script = ExtResource("39_vwggl")
enemy = NodePath("../..")
